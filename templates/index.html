<html>
<head>
	<title>Page Title</title>	
	<style> /* set the CSS */
	.modal-backdrop
{
    opacity:0 !important;
}
	.line path { 
	    stroke: orange;
	    stroke-width: 2;
	    fill: none;
	}

	.pie path {
	  	  
	  stroke: #333;
	  stroke-width: 0;
	  transition: fill 150ms linear;
	  transition-delay: 50ms;
	}

	.pie path:hover {	  
	  stroke: #000;
	  transition-delay: 0;
	}

	.bar rect {
	  shape-rendering: crispEdges;
	}

	.bar text {
	  fill: #999999;
	}

	.axis path,
	.axis line {
	    fill: none;
	    stroke: grey;
	    stroke-width: 1;
	    shape-rendering: crispEdges;
	}

	</style>
</head>
<body>

	<!-- d3.js -->
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="https://d3js.org/d3-queue.v3.min.js"></script>
	<script src="https://d3js.org/d3-color.v1.min.js"></script>
	<script src="https://d3js.org/d3-interpolate.v1.min.js"></script>
	<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>

	<!-- lodash -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.js"></script>

	<!-- jquery -->
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 

	<!-- simple statistic -->
	<script src="{{ url_for('static', filename='arr-stat.js') }}"></script>

	<!-- tipsy -->
	<script type="text/javascript" src="{{ url_for('static', filename='jquery.tipsy.js') }}"></script>
	<link href="{{ url_for('static', filename='tipsy.css') }}" rel="stylesheet" type="text/css" />

	<!-- bootstrap -->
	<script src="{{ url_for('static', filename='bootstrap.min.js') }}"></script>
	<link href="{{ url_for('static', filename='bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

	<!-- main -->
	<link href="{{ url_for('static', filename='main.css') }}" rel="stylesheet" type="text/css" />

	<!-- scrolling nav -->
	<script src="{{ url_for('static', filename='scrolling-nav.js') }}"></script>
	<link href="{{ url_for('static', filename='scrolling-nav.css') }}" rel="stylesheet" type="text/css" />

	<!-- font -->
	<link href="{{ url_for('static', filename='font-awesome/css/font-awesome.min.css') }}" rel="stylesheet" type="text/css" />

	<!-- include-html -->
	<script src="https://www.w3schools.com/lib/w3.js"></script>

	<div w3-include-html="{{ url_for('static', filename='navbar.html') }}"></div>
	
	<!-- Intro Section -->
	<section id="intro" class="intro-section">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<h1>The Network</h1>
					<p class="text-center">An interactive exploration of water distribution network</p>
				</div>
			</div>

			<svg id="graph-canvas" width="800" height="600"></svg>

			<div id="option" class="row">
				<div class="col-xs-2"></div>
				<div class="col-xs-6">
					<!-- <input name="big"
					type="button"
					class="btn btn-default"
					value="Big"
					onclick="initialize(2)" > -->
					<div class="btn-group">
					<input name="small"
					type="button"
					class="btn btn-default"
					value="Small"
					onclick="initialize(1)" >

					<input name="showdirection"
					id = "direction-button"
					type="button"
					class="btn btn-danger"
					style="width: 70px !important;"
					value="Pause"
					onclick="loopAnimation()" >

					<input name="predirection"
					type="button"
					class="btn btn-default"
					value="Predirection"
					onclick="predirection()" >

					<input name="updateButton" 
					type="button" 
					class="btn btn-default"
					value="Imaginary" 
					onclick="updateData()" />

					<input name="updateButton1" 
					type="button" 
					class="btn btn-default"
					value="Pressure" 
					onclick="updateData1()" />

					<input name="updateButton2" 
					type="button" 
					class="btn btn-default"
					value="Max Flow" 
					onclick="updateData2()" />
					</div>
					
				</div>
				<div class="col-xs-2">
					<div class="input-group">
						<input id="iteration" type="text" class="form-control" placeholder="Iteration">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" onclick="updateData3()">Go!</button>
						</span>
					</div>
				</div>
				<div class="col-xs-2"></div>
			</div>			
		</div>
		<!-- <div class="nextSection">
            <a class="page-scroll" href="#first">
                sudddd
            </a>
        </div> -->

	</section>

	<section id="first" class="first-section">
		<div class="container">
			<div class="row">
				<div class="col-xs-12">
					<h1>Summary</h1>
					<hr>
				</div>
			</div>
			<div class="row" style="padding-top:40">
				<div class="col-xs-2"> </div>          	
				<div id="summary" class="col-xs-4"> 
					<table class="table table-striped">
						<thead>
							<tr>
								<th colspan="2" style="text-align:center;">Network information</th>
							</tr>
						</thead>
						<tbody>
							<tr>
								<th >Name</th>
								<td id="td-name" style="text-align:center"></td>				   
							</tr>
							<tr>
								<th># Nodes</th>
								<td id="td-num_node" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Edges</th>
								<td id="td-num_edge" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Customers</th>
								<td id="td-num_customer" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Sources</th>
								<td id="td-num_source" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Tanks</th>
								<td id="td-num_tank" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Pumps</th>
								<td id="td-num_pump" style="text-align:center"></td>				            
							</tr>
							<tr>
								<th># Valves</th>
								<td id="td-num_valve" style="text-align:center"></td>				            
							</tr>
						</tbody>
					</table>
				</div>				
				<div class="col-xs-4"> 
					<svg id="pie-canvas" style="margin-top:-20"></svg> 
				</div>               
				<div class="col-xs-2"> </div>  				
			</div> 

			<div class="row" style="padding-top:40">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h2>Performance</h2>
				</div>				
				
			</div>

			<div class="row" style="padding-top:40">
				<div class="col-xs-3"></div> 
				<div class="col-xs-4"> 
					<svg id="gap-canvas" style="margin-top:20"></svg>
				</div> 
			</div>

			<div class="row" style="padding-top:40">
				<div class="col-xs-3"></div>
				<div class="col-xs-4"> 
					<svg id="energy-canvas" style="margin-top:20"></svg> 
				</div> 
			</div>

			<div class="row" style="padding-top:40">
				<div class="col-xs-3"></div>
				<div class="col-xs-4"> 
					<svg id="pump-energy-canvas" style="margin-top:20"></svg>
				</div> 
			</div>

			<div class="row" style="padding-top:40">
				<div class="col-xs-3"></div>
				<div class="col-xs-4"> 
					<svg id="pressure-canvas" style="margin-top:20"></svg>  
				</div> 
			</div>

			<div class="row" style="padding-top:40">
				<div class="col-xs-3"></div>
				<div class="col-xs-4"> 
					<svg id="flow-canvas" style="margin-top:20"></svg> 
				</div> 
			</div>

		</div>
		<!-- <div class="nextSection">
            <a class="page-scroll" href="#first">
                joke
            </a>
        </div> -->
		
		  
		     
		
		
		 
	</section>
	<button class="btn" data-toggle="modal" data-target="#myModal">
  Login
</button>

<!-- Modal -->
<div class="modal modal-transparent" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>
	<section id="second" class="second-section">
		<div class="container">

			<div class="row">			
				<div class="col-xs-12">
					<h1 style="margin-top:200">Node Information</h1>
					<hr>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h3>Customer</h3>
				</div>
				<div class="col-xs-7"></div>
			</div>

			<div class="row" >          
				<div class="col-xs-3"></div>                       		
				<div class="col-xs-6">                        		
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="text-align:center">#</th>
								<th style="text-align:center">id</th>
								<th style="text-align:center">Demand</th>
								<th style="text-align:center">Flow In</th>
								<th style="text-align:center">Flow Satisfy?</th>
								<th style="text-align:center">Min Pressure</th>
								<th style="text-align:center">Head</th>				
								<th style="text-align:center">Head Satisfy?</th>
							</tr>
						</thead>
						<tbody>
							<tr id="tr-id-1" class="tr-class-1">
								<th style="text-align:center">1</th>
								<td id="customers-id1" style="text-align:center"></td>
								<td id="customers-demand1" style="text-align:center"></td>
								<td id="customers-flow_in1" style="text-align:center"></td>
								<td id="customers-flow_satisfied1" style="text-align:center"></td>
																
								 <td id="customers-min_pressure1" style="text-align:center"></td>	
								<td id="customers-pressure1" style="text-align:center"></td>
								
								<td id="customers-pressure_satisfied1" style="text-align:center"></td>								
							</tr>
							<tr id="tr-id-2" class="tr-class-2">
								<th style="text-align:center">2</th>
								<td id="customers-id2" style="text-align:center"></td>
								<td id="customers-demand2" style="text-align:center"></td>
								<td id="customers-flow_in2" style="text-align:center"></td>
								<td id="customers-flow_satisfied2" style="text-align:center"></td>								
								<td id="customers-min_pressure2" style="text-align:center"></td>	
								<td id="customers-pressure2" style="text-align:center"></td>
								
								<td id="customers-pressure_satisfied2" style="text-align:center"></td>	
							</tr>
							<tr id="tr-id-3" class="tr-class-3">
								<th style="text-align:center">3</th>	
								<td id="customers-id3" style="text-align:center"></td>
								<td id="customers-demand3" style="text-align:center"></td>
								<td id="customers-flow_in3" style="text-align:center"></td>
								<td id="customers-flow_satisfied3" style="text-align:center"></td>															
								<td id="customers-min_pressure3" style="text-align:center"></td>
								<td id="customers-pressure3" style="text-align:center"></td>	
								<td id="customers-pressure_satisfied3" style="text-align:center"></td>	
							</tr>
							<tr id="tr-id-4" class="tr-class-4">
								<th style="text-align:center">4</th>	
								<td id="customers-id4" style="text-align:center"></td>
								<td id="customers-demand4" style="text-align:center"></td>
								<td id="customers-flow_in4" style="text-align:center"></td>
								<td id="customers-flow_satisfied4" style="text-align:center"></td>								
								
								<td id="customers-min_pressure4" style="text-align:center"></td>
								<td id="customers-pressure4" style="text-align:center"></td>	
								<td id="customers-pressure_satisfied4" style="text-align:center"></td>	
							</tr>
							<tr id="tr-id-5" class="tr-class-5">
								<th style="text-align:center">5</th>	
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>
								<td></td>								
							</tr>
						</tbody>
					</table>
				</div> 
				<div class="col-xs-3"></div>                       	                      
			</div>

			<div class="row" style="padding-top:20">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h3>Source</h3>
				</div>
				<div class="col-xs-7"></div>
			</div>

			<div class="row">
				<div class="col-xs-3"></div>           
				<div class="col-xs-6">                        		
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="text-align:center">#</th>
								<th style="text-align:center">id</th>
								<th style="text-align:center">Flow Out</th>
								<th style="text-align:center">Min Pressure</th>
								<th style="text-align:center">Head</th>
								<th style="text-align:center">Head Satisfy?</th>					
							</tr>
						</thead>
						<tbody>
							<tr id="tr-id-1" class="tr-class-1">
								<th style="text-align:center">1</th>
								<td id="sources-id1" style="text-align:center"></td>
								<td id="sources-flow_out1" style="text-align:center"></td>	<td id="sources-min_pressure1" style="text-align:center"></td>					
								<td id="sources-pressure1" style="text-align:center"></td>
								<td id="sources-pressure_satisfied1" style="text-align:center"></td>								
							</tr>
							<tr id="tr-id-2" class="tr-class-2">
								<th style="text-align:center">2</th>
								<td id="sources-id2" style="text-align:center"></td>
								<td id="sources-flow_out2" style="text-align:center"></td>	<td id="sources-min_pressure2" style="text-align:center"></td>						
								<td id="sources-pressure2" style="text-align:center"></td>
								<td id="sources-pressure_satisfied2" style="text-align:center"></td>
							</tr>
							<tr id="tr-id-3" class="tr-class-3">
								<th style="text-align:center">3</th>	
								<td id="sources-id3" style="text-align:center"></td>
								<td id="sources-flow_out3" style="text-align:center"></td>	<td id="sources-min_pressure3" style="text-align:center"></td>						
								<td id="sources-pressure3" style="text-align:center"></td>
									<td id="sources-pressure_satisfied3" style="text-align:center"></td>
							</tr>
							<tr id="tr-id-4" class="tr-class-4">
								<th style="text-align:center">4</th>	
								<td id="sources-id4" style="text-align:center"></td>
								<td id="sources-flow_out4" style="text-align:center"></td>	<td id="sources-min_pressure4" style="text-align:center"></td>							
								<td id="sources-pressure4" style="text-align:center"></td>
								<td id="sources-pressure_satisfied4" style="text-align:center"></td>
							</tr>
							<tr id="tr-id-5" class="tr-class-5">
								<th style="text-align:center">5</th>	
								<td id="sources-id5" style="text-align:center"></td>
								<td id="sources-flow_out5" style="text-align:center"></td>	<td id="sources-min_pressure5" style="text-align:center"></td>							
								<td id="sources-pressure5" style="text-align:center"></td>
								<td id="sources-pressure_satisfied5" style="text-align:center"></td>
							</tr>
						</tbody>
					</table>
				</div>
				<div class="col-xs-3"></div>                        
			</div>

			<div class="row" style="padding-top:20">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h3>Key Node</h3>
				</div>				
				
			</div>

			<div class="row">
				<div class="col-xs-4"></div>
				<div class="col-xs-3">	
					<form>	
						<label class="radio-inline">
						  <input id="top-five-pressure" type="radio" name="optradio" onclick = "get_top_five_highest_pressure_nodes()">Highest Pressure
						</label>
						<label class="radio-inline">
						  <input type="radio" name="optradio" onclick = "get_top_five_lowest_pressure_nodes()">Lowest Pressure
						</label>
					</form>
				</div>					
				<div class="col-xs-2">		
					<div class="input-group">
						<input id="search_node_id" type="text" class="form-control" placeholder="Node id">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" onclick="get_specified_node()">Go!</button>
						</span>
					</div>
				</div>
			</div>

			<div class="row"> 
				<div class="col-xs-3"></div>      
				<div class="col-xs-6">                        		
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="text-align:center">#</th>
								<th style="text-align:center">id</th>								
								<th style="text-align:center">Min Pressure</th>
								<th style="text-align:center">Head</th>
								<th style="text-align:center">Head Satisfy?</th>
								<th style="text-align:center">Type</th>
							</tr>
						</thead>
						<tbody>
							<tr id="tr-id-1" class="tr-class-1">
								<th style="text-align:center">1</th>
								<td id="top_five_pressure-id1" style="text-align:center"></td>											
								<td id="top_five_pressure-min_pressure1" style="text-align:center"></td>	
								<td id="top_five_pressure-pressure1" style="text-align:center"></td>
								<td id="top_five_pressure-satisfied1" style="text-align:center"></td>
								<td id="top_five_pressure-type1" style="text-align:center"></td>	
														
							</tr>
							<tr id="tr-id-2" class="tr-class-2">
								<th style="text-align:center">2</th>
								<td id="top_five_pressure-id2" style="text-align:center"></td>												
								<td id="top_five_pressure-min_pressure2" style="text-align:center"></td>	
								<td id="top_five_pressure-pressure2" style="text-align:center"></td>
								<td id="top_five_pressure-satisfied2" style="text-align:center"></td>
								<td id="top_five_pressure-type2" style="text-align:center"></td>
								
							</tr>
							<tr id="tr-id-3" class="tr-class-3">
								<th style="text-align:center">3</th>
								<td id="top_five_pressure-id3" style="text-align:center"></td>												
								<td id="top_five_pressure-min_pressure3" style="text-align:center"></td>	
								<td id="top_five_pressure-pressure3" style="text-align:center"></td>
								<td id="top_five_pressure-satisfied3" style="text-align:center"></td>
								<td id="top_five_pressure-type3" style="text-align:center"></td>								
	
							</tr>
							<tr id="tr-id-4" class="tr-class-4">
								<th style="text-align:center">4</th>
								<td id="top_five_pressure-id4" style="text-align:center"></td>														
								<td id="top_five_pressure-min_pressure4" style="text-align:center"></td>	
								<td id="top_five_pressure-pressure4" style="text-align:center"></td>
								<td id="top_five_pressure-satisfied4" style="text-align:center"></td>
								<td id="top_five_pressure-type4" style="text-align:center"></td>	
														
							</tr>
							<tr id="tr-id-5" class="tr-class-5">
								<th style="text-align:center">5</th>
								<td id="top_five_pressure-id5" style="text-align:center"></td>																
								<td id="top_five_pressure-min_pressure5" style="text-align:center"></td>	
								<td id="top_five_pressure-pressure5" style="text-align:center"></td>
								<td id="top_five_pressure-satisfied5" style="text-align:center"></td>
								<td id="top_five_pressure-type5" style="text-align:center"></td>
														
							</tr>
						</tbody>
					</table>
				</div>                       
			</div>

		</div>        
	</section>

	<section id="third" class="third-section">
		<div class="container">

			<div class="row" >			
				<div class="col-xs-12">
					<h1 style="margin-top:200">Edge Information</h1>
					<hr>
				</div>
			</div>

			<div class="row">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h3>Valve</h3>
				</div>
				<div class="col-xs-7"></div>
			</div>

			<div class="row" >          
				<div class="col-xs-3"></div>                       		
				<div class="col-xs-6">                        		
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="text-align:center">#</th>
								<th style="text-align:center">id</th>
								<th style="text-align:center">Head id</th>
								<th style="text-align:center">Tail id</th>				
								<th style="text-align:center">Flow</th>
								<th style="text-align:center">Valve Status</th>
							</tr>
						</thead>
						<tbody>
							<tr id="tr-id-1" class="tr-class-1">
								<th style="text-align:center">1</th>
								<td id="valves-edge_id1" style="text-align:center"></td>
								<td id="valves-head_id1" style="text-align:center"></td>
								<td id="valves-tail_id1" style="text-align:center"></td>
								<td id="valves-valve_flow1" style="text-align:center"></td>
								<td id="valves-valve_status1" style="text-align:center"></td>							
							</tr>
							<tr id="tr-id-2" class="tr-class-2">
								<th style="text-align:center">2</th>
								<td id="valves-edge_id2" style="text-align:center"></td>
								<td id="valves-head_id2" style="text-align:center"></td>
								<td id="valves-tail_id2" style="text-align:center"></td>
								<td id="valves-valve_flow2" style="text-align:center"></td>
								<td id="valves-valve_status2" style="text-align:center"></td>							
							</tr>
							<tr id="tr-id-3" class="tr-class-3">
								<th style="text-align:center">3</th>
								<td id="valves-edge_id3" style="text-align:center"></td>
								<td id="valves-head_id3" style="text-align:center"></td>
								<td id="valves-tail_id3" style="text-align:center"></td>
								<td id="valves-valve_flow3" style="text-align:center"></td>
								<td id="valves-valve_status3" style="text-align:center"></td>
															
							</tr>
							<tr id="tr-id-4" class="tr-class-4">
								<th style="text-align:center">4</th>
								<td id="valves-edge_id4" style="text-align:center"></td>
								<td id="valves-head_id4" style="text-align:center"></td>
								<td id="valves-tail_id4" style="text-align:center"></td>
								<td id="valves-valve_flow4" style="text-align:center"></td>
								<td id="valves-valve_status4" style="text-align:center"></td>
															
							</tr>
							<tr id="tr-id-5" class="tr-class-5">
								<th style="text-align:center">5</th>
								<td id="valves-edge_id5" style="text-align:center"></td>
								<td id="valves-head_id5" style="text-align:center"></td>
								<td id="valves-tail_id5" style="text-align:center"></td>
								<td id="valves-valve_flow5" style="text-align:center"></td>
								<td id="valves-valve_status5" style="text-align:center"></td>
															
							</tr>
						</tbody>
					</table>
				</div> 
				<div class="col-xs-3"></div>                       	                      
			</div>

			<div class="row" style="padding-top:20">
				<div class="col-xs-2"></div>
				<div class="col-xs-3">
					<h3>Key Edge</h3>
				</div>				
				
			</div>

			<div class="row">
				<div class="col-xs-4"></div>
				<div class="col-xs-3">	
					<form>		
						<label class="radio-inline">
						  <input id="top-five-flow" type="radio" name="optradio" onclick = "get_top_five_highest_flow_edges()">Highest Flow
						</label>
						<label class="radio-inline">
						  <input type="radio" name="optradio" onclick = "get_top_five_lowest_flow_edges()">Lowest Flow
						</label>
					</form>
				</div>					
				<div class="col-xs-2">		
					<div class="input-group">
						<input id="search_edge_id" type="text" class="form-control" placeholder="Edge id">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" onclick="get_specified_edge()">Go!</button>
						</span>
					</div>
				</div>
			</div>

			<div class="row"> 
				<div class="col-xs-3"></div>      
				<div class="col-xs-6">                        		
					<table class="table table-striped">
						<thead>
							<tr>
								<th style="text-align:center">#</th>
								<th style="text-align:center">id</th>
								<th style="text-align:center">Head id</th>
								<th style="text-align:center">Tail id</th>
								<th style="text-align:center">Type</th>
								<th style="text-align:center">Flow</th>
								<th style="text-align:center">Gap</th>				
							</tr>
						</thead>
						<tbody>
							<tr id="tr-id-1" class="tr-class-1">
								<th style="text-align:center">1</th>
								<td id="top_five_flow-edge_id1" style="text-align:center"></td>					
								<td id="top_five_flow-head_id1" style="text-align:center"></td>
								<td id="top_five_flow-tail_id1" style="text-align:center"></td>
								<td id="top_five_flow-type1" style="text-align:center"></td>		
								<td id="top_five_flow-flow1" style="text-align:center"></td>	
								<td id="top_five_flow-gap1" style="text-align:center"></td>								
								
							</tr>
							<tr id="tr-id-2" class="tr-class-2">
								<th style="text-align:center">2</th>
								<td id="top_five_flow-edge_id2" style="text-align:center"></td>					
								<td id="top_five_flow-head_id2" style="text-align:center"></td>
								<td id="top_five_flow-tail_id2" style="text-align:center"></td>
								<td id="top_five_flow-type2" style="text-align:center"></td>		
								<td id="top_five_flow-flow2" style="text-align:center"></td>	
								<td id="top_five_flow-gap2" style="text-align:center"></td>									
							</tr>
							<tr id="tr-id-3" class="tr-class-3">
								<th style="text-align:center">3</th>	
								<td id="top_five_flow-edge_id3" style="text-align:center"></td>					
								<td id="top_five_flow-head_id3" style="text-align:center"></td>
								<td id="top_five_flow-tail_id3" style="text-align:center"></td>
								<td id="top_five_flow-type3" style="text-align:center"></td>		
								<td id="top_five_flow-flow3" style="text-align:center"></td>	
								<td id="top_five_flow-gap3" style="text-align:center"></td>								
							</tr>
							<tr id="tr-id-4" class="tr-class-4">
								<th style="text-align:center">4</th>	
								<td id="top_five_flow-edge_id4" style="text-align:center"></td>					
								<td id="top_five_flow-head_id4" style="text-align:center"></td>
								<td id="top_five_flow-tail_id4" style="text-align:center"></td>
								<td id="top_five_flow-type4" style="text-align:center"></td>		
								<td id="top_five_flow-flow4" style="text-align:center"></td>	
								<td id="top_five_flow-gap4" style="text-align:center"></td>									
							</tr>
							<tr id="tr-id-5" class="tr-class-5">
								<th style="text-align:center">5</th>	
								<td id="top_five_flow-edge_id5" style="text-align:center"></td>					
								<td id="top_five_flow-head_id5" style="text-align:center"></td>
								<td id="top_five_flow-tail_id5" style="text-align:center"></td>
								<td id="top_five_flow-type5" style="text-align:center"></td>		
								<td id="top_five_flow-flow5" style="text-align:center"></td>	
								<td id="top_five_flow-gap5" style="text-align:center"></td>								
							</tr>
						</tbody>
					</table>
				</div>                       
			</div>

		</div>        
	</section>


	<section id="fourth" class="fourth-section" >
		<div class="container">

			<div class="row" >			
				<div class="col-xs-12">
					<h1 style="margin-top:200">Dynamic</h1>
					<hr>
				</div>
			</div>

				<div class="col-xs-3">
					<h3>Dynamic Table</h3>
				</div>

			<form>		
				<label class="radio-inline">
				  <input id="dynamic_button" type="radio" name="optradio" onclick = "getValvesDynamic()">Valves
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getSourcesDynamic()">Sources
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getCustomersDynamic()">Customers
				</label>
				<label class="radio-inline">
				<input type="radio" name="optradio" onclick = "getEdgesDynamic()">Edges
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getNodesDynamic()">Nodes
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getKeyNodesDynamicLowest()">Key Nodes(Five Lowest)
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getKeyNodesDynamicHighest()">Key Nodes(Five Highest)
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getKeyEdgesDynamicLowest()">Key Edges(Five Lowest)
				</label>
				<label class="radio-inline">
				  <input type="radio" name="optradio" onclick = "getKeyEdgesDynamicHighest()">Key Edges(Five Highest)
				</label>
			</form>
				<div class="col-xs-2">		
					<div class="input-group">
						<input id="search_dynamic_edge_id" type="text" class="form-control" placeholder="Edge id">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" onclick="get_specified_edge_dynamic()">Go!</button>
						</span>
					</div>
					<div class="input-group">
						<input id="search_dynamic_node_id" type="text" class="form-control" placeholder="Node id">
						<span class="input-group-btn">
							<button class="btn btn-default" type="button" onclick="get_specified_node_dynamic()">Go!</button>
						</span>
					</div>
				</div>


			<div class="row" >          
				<div class="col-xs-3"></div>                       		
				<div class="col-xs-6">                        		
					<div id="dynamic_table_label" style="height:300px; overflow-y:auto">
					</div>

				</div> 
				<div class="col-xs-3"></div>                       	                      
			</div>

		</div>        
	</section>



	<script>
		function histogram(canvas, values, title) {
			var margin = {
		        top: 20,
		        right: 20,
		        bottom: 30,
		        left: 50
		    };

		    var width = 500 - margin.left - margin.right
		        height = 300 - margin.top - margin.bottom;
			var color = "steelblue";			

			var max = d3.max(values);
			var min = d3.min(values);

			var x = d3.scale.linear()
				      .domain([min, max])
				      .range([0, width]);

			var formatCount = d3.format(",0f");

			var data = d3.layout.histogram()
					     .bins(x.ticks(20))
					      (values);

			var yMax = d3.max(data, function(d){return d.length});

			var yMin = d3.min(data, function(d){return d.length});

			var colorScale = d3.scale.linear()
            				   .domain([yMin, yMax])
            				   .interpolate(d3.interpolateHcl)
            				   .range(["#42a1f4", "#2d73af"]);

            var y = d3.scale.linear()
						    .domain([0, yMax])
						    .range([height, 0]);

			var xAxis = d3.svg.axis()
						    .scale(x)
						    .orient("bottom");
			
		    var svg = d3.select(canvas)
					    .attr("width", width + margin.left + margin.right)
        				.attr("height", height + margin.top + margin.bottom)
        				.append("g")        			
		        		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");
		    svg.append("text")
		        .attr("x", (width / 2))             
		        .attr("y", 0 - (margin.top/4))
		        .attr("text-anchor", "middle")          
		        .style("text-decoration", "underline")  
		        .text(title);

		    var bar = svg.selectAll(".bar")
				    .data(data)
				  .enter().append("g")
				    .attr("class", "bar")
				    .attr("transform", function(d) {return "translate(" + x(d.x) + "," + y(d.y) + ")"; });
			
			bar.append("rect")
			    .attr("x", 1)
			    .attr("width", (x(data[0].dx) - x(0)) - 1)
			    .attr("height", function(d) { return height - y(d.y); })
			    .attr("fill", function(d) { return colorScale(d.y) });
			    // .attr("fill", d3.rgb(0, 158, 44));

				bar.append("text")
				    .attr("dy", ".75em")
				    .attr("y", -12)
				    .attr("x", (x(data[0].dx) - x(0)) / 2)
				    .attr("text-anchor", "middle")
				    .text(function(d) { return formatCount(d.y); });

				svg.append("g")
				    .attr("class", "x axis")
				    .attr("transform", "translate(0," + height + ")")
				    .call(xAxis);

		    
		}

		function plot_blank(canvas, title) {
			var margin = {
		        top: 20,
		        right: 20,
		        bottom: 30,
		        left: 50
		    };
		    
		    
		    var width = 500 - margin.left - margin.right,
		        height = 300 - margin.top - margin.bottom,
		        padding = 100;

		    var svg = d3.select(canvas)
					    .attr("width", width + margin.left + margin.right)
        				.attr("height", height + margin.top + margin.bottom)
        				.append("g") 
        				.attr("class", "line")       				
		        		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		    var yScale = d3.scale.linear().range([height, 0]);

		    var xScale = d3.scale.linear().range([0, width]);

		    // define the y axis
		    var yAxis = d3.svg.axis()
		    	.scale(yScale)
		        .orient("left")		        
		        .ticks(10);

		    // define the y axis
		    var xAxis = d3.svg.axis()		        
		        .scale(xScale)
		        .orient("bottom")
		        .ticks(5);

		    yScale.domain([0, 1000]);
		    xScale.domain([1, 10]);

		    // Define the line
			var valueline = d3.svg.line()
			    .x(function(d) { return xScale(d[0]); })
			    .y(function(d) { return yScale(d[1]); });

			svg.append("text")
		        .attr("x", (width / 2))             
		        .attr("y", 0 - (margin.top/4))
		        .attr("text-anchor", "middle")          
		        .style("text-decoration", "underline")  
		        .text(title);	

		    svg.append("g")
		        .attr("class", "x axis")
		        .attr("transform", "translate(0," + height + ")")
		        .call(xAxis)
		        .append("text")
			    .attr("fill", "#000")
			    .attr("dy", "-0.71em")
			    .attr("x", width)	
			    .style("text-anchor", "end")
			    .text("Iteration");	

		    svg.append("g")
        		.attr("class", "y axis")
        		.call(yAxis)
        		.append("text")
		        .attr("fill", "#000")
      			.attr("transform", "rotate(-90)")
      			.attr("y", 6)
      			.attr("dy", "0.71em")
      			.attr("text-anchor", "end")      
      			.text(title);

		}
		
		function plot(canvas, y, title) {

			var margin = {
		        top: 20,
		        right: 20,
		        bottom: 30,
		        left: 50
		    };
		    
		    
		    var width = 500 - margin.left - margin.right,
		        height = 300 - margin.top - margin.bottom,
		        padding = 100;

		    var svg = d3.select(canvas)
					    .attr("width", width + margin.left + margin.right)
        				.attr("height", height + margin.top + margin.bottom)
        				.append("g") 
        				.attr("class", "line")       				
		        		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

		    var yScale = d3.scale.linear().range([height, 0]);

		    var xScale = d3.scale.linear().range([0, width]);

		    var max_iter = Math.ceil(y.length / 10) * 10;		   

		    var data = d3.zip(d3.range(1, y.length+1), y);		   

		    // define the y axis
		    var yAxis = d3.svg.axis()
		    	.scale(yScale)
		        .orient("left")		        
		        .ticks(10);

		    // define the y axis
		    var xAxis = d3.svg.axis()		        
		        .scale(xScale)
		        .orient("bottom")
		        .ticks(5);

		    yScale.domain([0, Math.ceil(d3.max(y))]);
		    xScale.domain([1, max_iter]);

		    // Define the line
			var valueline = d3.svg.line()
			    .x(function(d) { return xScale(d[0]); })
			    .y(function(d) { return yScale(d[1]); });

			svg.append("text")
		        .attr("x", (width / 2))             
		        .attr("y", 0 - (margin.top/4))
		        .attr("text-anchor", "middle")          
		        .style("text-decoration", "underline")  
		        .text(title);

		    svg.append("path")        		
        		.attr("d", valueline(data));

		    svg.append("g")
		        .attr("class", "x axis")
		        .attr("transform", "translate(0," + height + ")")
		        .call(xAxis)
		        .append("text")
			    .attr("fill", "#000")
			    .attr("dy", "-0.71em")
			    .attr("x", width)	
			    .style("text-anchor", "end")
			    .text("Iteration");	

		    svg.append("g")
        		.attr("class", "y axis")
        		.call(yAxis)
        		.append("text")
		        .attr("fill", "#000")
      			.attr("transform", "rotate(-90)")
      			.attr("y", 6)
      			.attr("dy", "0.71em")
      			.attr("text-anchor", "end")      
      			.text(title);

        	svg.selectAll("circle")
			      .data(data)
			      .enter().append("circle")
			      .attr("r", 3.5)
			      .attr("cx", function(d) { return xScale(d[0]); })
			      .attr("cy", function(d) { return yScale(d[1]); })
			      .attr("fill","steelblue");

			$(canvas + ' circle').tipsy({
		        gravity: 'w',
		        html: true,
		        title: function() {
		            var d = this.__data__;		            
		            return d[1].toFixed(2);
		        }
		    });	        

		}

		var data = [1, 0];

		var width = 400,
		    height = 400;

		var outerRadius = height / 2 - 20,
		    innerRadius = outerRadius / 3,
		    cornerRadius = 10;

		var pie = d3.layout.pie()
		    .padAngle(.02);

		var arc = d3.svg.arc()
		    .padRadius(outerRadius)
		    .innerRadius(innerRadius);

		var svg = d3.select("#pie-canvas")
		    .attr("width", width)
		    .attr("height", height)
		  .append("g")
		  .attr("class", "pie")
		    .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

		svg.selectAll("path")
		    .data(pie(data))
		  .enter().append("path")
		    .each(function(d) { d.outerRadius = outerRadius - 20; })
		    .attr("d", arc)
		    .attr("fill", "#edbab8")

		    .on("mouseover", arcTween(outerRadius, 0))
		    .on("mouseout", arcTween(outerRadius - 20, 150));

		function arcTween(outerRadius, delay) {
		  return function() {
		    d3.select(this).transition().delay(delay).attrTween("d", function(d) {
		      var i = d3.interpolate(d.outerRadius, outerRadius);
		      return function(t) { d.outerRadius = i(t); return arc(d); };
		    });
		  };
		}

		var state = 1;
		var loop = true;
		var flowLoop;

		var energyHistory = [];
		var gapHistory = [];
		var pumpEnergyHistory = [];

		plot_blank("#gap-canvas", "Gap");
		plot_blank("#energy-canvas", "Energy");
		plot_blank("#pump-energy-canvas", "Pump Energy");

		function test(error, info) {
			updateTable();
			console.log(info);
			d3.select("#gap-canvas").selectAll("*").remove();
			d3.select("#energy-canvas").selectAll("*").remove();
			d3.select("#pump-energy-canvas").selectAll("*").remove();
			d3.select("#pressure-canvas").selectAll("*").remove();
			d3.select("#flow-canvas").selectAll("*").remove();
			
			energyHistory.push.apply(energyHistory, info.energy_loss);		
			gapHistory.push.apply(gapHistory, info.gap);		
			pumpEnergyHistory.push.apply(pumpEnergyHistory, info.energy_pump);		

			plot("#gap-canvas", gapHistory, "Gap");
			plot("#energy-canvas", energyHistory, "Energy");
			plot("#pump-energy-canvas", pumpEnergyHistory, "Pump Energy");
			
			var pressure = info.nodes.map(function(d) { return d.pressure; });
			var flow = info.edges.map(function(d) { return d.flow; });
			histogram("#pressure-canvas", pressure, "Pressure");
			histogram("#flow-canvas", flow, "Flow");

      	}

	</script>

	<script src="{{ url_for('static', filename='write-table.js') }}"></script>
	<script src="{{ url_for('static', filename='draw-graph.js') }}"></script>


	
</body>
</html>
